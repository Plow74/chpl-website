<div>
  <div class="row">
    <div class="col-sm-12">
      <h3>Certified Product</h3>
    </div>
  </div>
  <div class="row">
    <label for="activity-start-upload" class="col-sm-2 control-label">Start Date</label>
    <div class="col-sm-3">
      <input type="date" class="form-control" ng-model="$ctrl.activityRange.listing.startDate" name="activityStartUpload" id="activity-start-upload" placeholder="yyyy-MM-dd">
    </div>
    <label for="activity-end-upload" class="col-sm-2 control-label">End Date</label>
    <div class="col-sm-3">
      <input type="date" class="form-control" ng-model="$ctrl.activityRange.listing.endDate" name="activityEndUpload" id="activity-end-upload" placeholder="yyyy-MM-dd">
    </div>
    <div class="col-sm-2">
      <button class="btn btn-primary" ng-click="$ctrl.refreshActivity()" ng-disabled="!$ctrl.validDates('listing')">Search <i class="fa fa-search"></i></button>
      <button class="btn btn-ai-success"
              ng-csv="$ctrl.displayedCertifiedProductsUpload" filename="CP_Upload_{{ $ctrl.filename }}"
              csv-header="['ACB', 'Developer', 'Product', 'Certification Edition', 'CHPL Product Number', 'Certification Date', 'Activity Date']"
              csv-column-order="['acb', 'developer', 'product', 'certificationEdition', 'chplProductNumber', 'friendlyCertificationDate', 'friendlyActivityDate']">
        <i class="fa fa-cloud-download"></i> Download
      </button>
    </div>
  </div>
  <div class="row">
    <div class="col-sm-12 text-danger" ng-if="!$ctrl.validDates('listing')">Start date must be before end date, and no more than {{ $ctrl.activityRange.range }} days apart</div>
  </div>
  <div class="row">
    <div class="col-sm-12">
      <table st-table="$ctrl.displayed" st-safe-src="$ctrl.results" class="table table-striped table-responsive">
        <thead>
          <tr>
            <th class="search-header" st-sort="acb" st-skip-natural="true">ONC-ACB</th>
            <th class="search-header" st-sort="developer" st-skip-natural="true">Developer</th>
            <th class="search-header" st-sort="product" st-skip-natural="true">Product</th>
            <th class="search-header" st-sort="certificationEdition" st-skip-natural="true">Certification Edition</th>
            <th class="search-header" st-sort="chplProductNumber" st-skip-natural="true">CHPL Product Number</th>
            <th class="search-header" st-sort="certificationDate" st-skip-natural="true">Certification Date</th>
            <th class="search-header" st-sort="date" st-skip-natural="true" st-sort-default="reverse">Activity Date</th>
          </tr>
          <tr>
            <th><input st-search="acb" placeholder="Filter ONC-ACB" class="input-sm form-control" type="search"></th>
            <th><input st-search="developer" placeholder="Filter Developer" class="input-sm form-control" type="search"></th>
            <th><input st-search="product" placeholder="Filter Product" class="input-sm form-control" type="search"></th>
            <th><input st-search="certificationEdition" placeholder="Filter Certification Edition" class="input-sm form-control" type="search"></th>
            <th><input st-search="chplProductNumber" placeholder="Filter CHPL Product Number" class="input-sm form-control" type="search"></th>
            <th>&nbsp;</th>
            <th>&nbsp;</th>
          </tr>
        </thead>
        <tbody>
          <tr ng-if="$ctrl.displayed.length === 0">
            <td colspan="7">No activity found</td>
          </tr>
          <tr ng-repeat-start="activity in $ctrl.displayed" ng-if="$ctrl.displayed.length > 0">
            <td>{{ activity.acbName }}</td>
            <td>{{ activity.developerName }}</td>
            <td>{{ activity.productName }}</td>
            <td>{{ activity.edition }}</td>
            <td>
              <a href="#/product/{{ activity.objectId }}">{{ activity.chplProductNumber }}</a>
              <a href="#/admin/dpManagement/manage/{{ activity.objectId }}" class="pull-right"><i class="fa fa-pencil-square-o"></i></a>
            </td>
            <td>{{ activity.certificationDate | date : 'mediumDate' : 'UTC' }}</td>
            <td>{{ activity.date | date : 'MMM d, y H:mm:ss Z' : 'UTC' }}</td>
          </tr>
          <tr ng-repeat-end>
            <td colspan="7"><pre>{{ activity | json }}</pre></td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>
