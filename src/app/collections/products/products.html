<div class="container-fluid collection-page">
  <div class="pending" ng-if="vm.isPreLoading"></div>
  <div class="row">
    <div class="col-sm-12">
      <h1>Decertified Products</h1>
    </div>
  </div>
  <div class="main-content" id="mainContent" tabindex="-1" st-table="vm.displayedCps" st-safe-src="vm.allCps" st-set-filter="customFilter" vm.totalItemCount="totalItemCount">
    <div class="row">
      <div class="col-sm-12">
        <p>
          This list includes all health IT products that have had their status changed to a "decertified" status on the Certified Health IT Products List (CHPL). A product may be decertified for the following reasons: certificate terminated by ONC, certificate withdrawn by an ONC-ACB, or certification withdrawn by an ONC-ACB because the health IT developer requested it to be withdrawn when the product was under ONC-ACB surveillance or ONC direct review. For further descriptions of the certification statuses, please consult the <a href="https://www.healthit.gov/sites/default/files/policy/chpl_public_user_guide.pdf" analytics-on="click" analytics-event="CHPL Public User Guide" analytics-properties="{ category: 'Resources', label: '' }">CHPL Public User Guide</a>. For more information on how a decertified product may affect your attestation to the CMS EHR Incentive Programs, please consult the <a href="https://questions.cms.gov/faq.php?id=5005&faqId=12657">CMS FAQ</a>. For additional information about how a decertified product may affect your participation in other CMS programs, please reach out to that program.
        </p>
        <p>
          Note: This list excludes 2011 edition products. The 2011 edition has been retired from the certification program.
        </p>
      </div>
    </div>
    <st-manage register-search="vm.registerSearch(search)" name-space="decertifiedProductsTableState" />
    <div class="form-horizontal" ng-form="vm.searchForm" aria-live="polite">
      <div class="form-group" id="filters">
        <div class="col-sm-4">
          <div class="input-group">
            <div class="input-group-addon"><i class="fa fa-search"></i></div>
            <input type="text" class="form-control input-sm" id="generalFilter" placeholder="search by Developer, Product, Version, or CHPL ID"
                   ai-enhanced-text predicate="mainSearch" register-clear-filter="vm.registerClearFilter(clearFilter)" register-restore-state="vm.registerRestoreState(restoreState)" name-space="decertifiedProductsTableState">
            <label for="generalFilter"><span class="sr-only">Search by Developer, Product, Version, or CHPL ID</span></label>
          </div>
        </div>
        <div class="col-sm-8">
          <div uib-dropdown auto-close="outsideClick" class="btn-group dropdown-filter">
            <button class="btn btn-sm btn-ai dropdown-toggle" type="button" id="filter-button" uib-dropdown-toggle aria-haspopup="true" aria-expanded="true">
              <a ng-if="vm.isCategoryChanged(['acb', 'edition', 'certificationStatus', 'decertificationDate'])" href uib-tooltip="Filter has non-default option selected" tooltip-trigger="mouseenter focus click"><span class="sr-only">Filter has non-default option selected</span>*</a>
              Filter <i class="fa fa-filter"></i>
            </button>
            <div class="dropdown-menu row" aria-labeledby="filter-button" uib-dropdown-menu>
              <div class="col-sm-6">
                <strong>ONC-ACB</strong>
                <st-list-multiple collection="vm.allCps" predicate="acb" fixed-items="vm.filterItems.acbItems" has-changes="vm.categoryChanged['acb']" register-allow-all="vm.registerAllowAll(allowAll)" register-clear-filter="vm.registerClearFilter(clearFilter)" register-restore-state="vm.registerRestoreState(restoreState)" name-space="decertifiedProductsTableState" hidden-options="true"></st-list-multiple>
                <strong>Certification Edition</strong>
                <st-list-multiple collection="vm.allCps" predicate="edition" fixed-items="vm.filterItems.editionItems" has-changes="vm.categoryChanged['edition']" register-allow-all="vm.registerAllowAll(allowAll)" register-clear-filter="vm.registerClearFilter(clearFilter)" register-restore-state="vm.registerRestoreState(restoreState)" name-space="decertifiedProductsTableState"></st-list-multiple>
              </div>
              <div class="col-sm-6">
                <strong>Certification Status</strong>
                <st-list-multiple collection="vm.allCps" predicate="certificationStatus" fixed-items="vm.filterItems.statusItems" has-changes="vm.categoryChanged['certificationStatus']" register-allow-all="vm.registerAllowAll(allowAll)" register-clear-filter="vm.registerClearFilter(clearFilter)" register-restore-state="vm.registerRestoreState(restoreState)" name-space="decertifiedProductsTableState"></st-list-multiple>
              </div>
              <div class="col-sm-12">
                <strong>Decertification Date</strong>
                <ai-date-range predicate="decertificationDate" has-changes="vm.categoryChanged['decertificationDate']" register-clear-filter="vm.registerClearFilter(clearFilter)" register-restore-state="vm.registerRestoreState(restoreState)" name-space="decertifiedProductsTableState"></ai-date-range>
              </div>
              <div class="col-sm-12 text-center" ng-if="vm.isCategoryChanged(['acb', 'edition', 'certificationStatus', 'decertificationDate'])">
                <a href ng-click="vm.triggerClearFilters()">Clear Filters</a>
              </div>
            </div>
          </div>
        </div>
      </div> <!-- #filters -->
    </div><!-- filter form -->

    <div aria-live="polite">
      <div ng-if="vm.hasResults()" class="row">
        <div class="col-md-12 table-responsive">
          <table class="table table-striped table-responsive">
            <thead>
              <tr>
                <td colspan="9" class="text-center">
                  <div st-pagination="" st-items-by-page="vm.filterItems.pageSize" st-displayed-pages="10"></div>
                </td>
              </tr>
              <tr ng-if="vm.displayedCps && vm.displayedCps.length > 0">
                <th scope="col" class="search-header" st-sort="edition" st-skip-natural="true">Edition</th>
                <th scope="col" class="search-header" st-sort="developer" st-skip-natural="true">Developer</th>
                <th scope="col" class="search-header" st-sort="product" st-skip-natural="true">Product</th>
                <th scope="col" class="search-header" st-sort="version" st-skip-natural="true">Version</th>
                <th scope="col" class="search-header" st-sort="decertificationDate" st-skip-natural="true">Decertification Date</th>
                <th scope="col" class="search-header" st-sort="estimatedUsers" st-skip-natural="true"># of Known Users</th>
                <th scope="col" class="search-header" st-sort="acb" st-skip-natural="true">ONC-ACB</th>
                <th scope="col" class="search-header" st-sort="chplProductNumber" st-skip-natural="true" st-sort-default="true">CHPL ID</th>
                <th scope="col" class="search-header" st-sort="certificationStatus" st-skip-natural="true">Status</th>
              </tr>
            </thead>
            <tfoot ng-if="vm.displayedCps && vm.displayedCps.length > 0">
              <tr>
                <td colspan="9">Estimated Number of Meaningful Use Users is determined from attestations from the CMS Medicare EHR Incentive Program. This is not a complete representation of all Meaningful Use Users because it excludes those who participated in the CMS Medicaid EHR Incentive Program. Data is accurate as of: {{ vm.muuAccurateAsOf | date : 'mediumDate' : 'UTC' }}</td>
              </tr>
              <tr>
                <td colspan="9" class="text-center">
                  <div class="text-right" ng-if="vm.displayedCps && vm.displayedCps.length > 0">
                    <label for="pageSizeTop" class="sr-only">Show how many results</label>
                    Showing up to&nbsp;
                    <select ng-model="vm.filterItems.pageSize" id="pageSizeTop"
                            ng-options="v as v for v in [50,100,250]">
                    </select>
                    &nbsp;results per page
                  </div>
                  <div st-pagination="" st-items-by-page="vm.filterItems.pageSize" st-displayed-pages="10"></div>
                </td>
              </tr>
            </tfoot>
            <tbody>
              <tr ng-repeat="cp in vm.displayedCps">
                <td>{{ cp.edition }}</td>
                <td>{{ cp.developer }}</td>
                <td>{{ cp.product }}</td>
                <td>{{ cp.version }}</td>
                <td>{{ cp.decertificationDate | date : 'mediumDate' : 'UTC' }}</td>
                <td>{{ (cp.estimatedUsers || cp.estimatedUsers === 0) ? cp.estimatedUsers : 'Unknown' }}</td>
                <td>{{ cp.acb }}</td>
                <td><a href="#/product/{{ cp.id }}">{{ cp.chplProductNumber }}</a></td>
                <td>{{ cp.certificationStatus }}</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>  <!-- end of search results -->
  </div> <!-- #mainContent -->
</div>
