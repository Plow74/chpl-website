<div id="chpl-complaint" ng-form="$ctrl.form">
  <div ng-if="$ctrl.mode === $ctrl.modes.SELECT">
    <table class="table table-condensed">
      <thead>
        <tr>
          <th scope="col">ONC-ACB</th>
          <th scope="col">Type</th>
          <th scope="col">Status</th>
          <th scope="col">ONC Complaint Id</th>
          <th scope="col">Received Date</th>
          <th scope="col">Actions</th>
        </tr>
      </thead>
      <tbody>
        <tr ng-repeat="complaint in $ctrl.complaints">
          <td>{{ complaint.certificationBody.name }}</td>
          <td>{{ complaint.complaintType.name }}</td>
          <td>{{ complaint.complaintStatusType.name }}</td>
          <td>{{ complaint.oncComplaintId }}</td>
          <td>{{ complaint.formattedReceivedDate | date : 'MMM d, y' : 'UTC' }}</td>
          <td>
            <button class="btn btn-link" ng-click="$ctrl.selectComplaint(complaint)"><i class="fa fa-edit"></i><span class="sr-only">Edit complaint</span></button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
  <div ng-if="$ctrl.mode === $ctrl.modes.EDIT || $ctrl.mode === $ctrl.modes.ADD">
    <div class="form-group" ng-if="$ctrl.hasAnyRole(['ROLE_ADMIN', 'ROLE_ONC'])">
      <label class="control-label" for="certificationBody">ONC-ACB</label>
      <div ng-if="$ctrl.mode === $ctrl.modes.EDIT" name="certificationBody">
        {{ $ctrl.complaint.certificationBody.name }}
      </div>
      <div ng-if="$ctrl.mode === $ctrl.modes.ADD">
        <select ng-model="$ctrl.complaint.certificationBody"
          id="certification-body" name="certificationBody" class="input-sm form-control"
          ng-options="acb.name for acb in $ctrl.certificationBodies | orderBy: 'name' | filter: {retired: false} track by acb.id">
        </select>
      </div>
    </div>
    <div class="form-group">
      <label class="control-label" for="complaintType">Complaint Type<span class="text-danger">*</span></label>
      <div>
        <select ng-model="$ctrl.complaint.complaintType"
          id="complaint-type" name="complaintType" class="input-sm form-control"
          ng-options="ct.name for ct in $ctrl.complaintTypes | orderBy: 'name' track by ct.id">
        </select>
      </div>
    </div>
    <div class="form-group" ng-if="$ctrl.mode === $ctrl.modes.EDIT">
      <label class="control-label" for="complaintStatusType">Complaint Status Type<span class="text-danger">*</span></label>
      <div>
        <select ng-model="$ctrl.complaint.complaintStatusType"
          id="complaint-status-type" name="complaintStatusType" class="input-sm form-control"
          ng-options="cst.name for cst in $ctrl.complaintStatusTypes | orderBy: 'name' track by cst.id">
        </select>
      </div>
    </div>
    <div class="form-group">
      <label class="control-label" for="oncComplaintId">ONC Complaint Id<span class="text-danger">*</span></label>
      <div>
        <input class="input-sm form-control" type="text" required ng-model="$ctrl.complaint.oncComplaintId" id="onc-complaint-id" name="oncComplaintId" ></input>
      </div>
    </div>
    <div class="form-group">
      <label class="control-label" for="receivedDate">Received Date<span class="text-danger">*</span></label>
      <div>
          <input type="date" class="input-sm form-control" ng-model="$ctrl.complaint.formattedReceivedDate" name="receivedDate" id="received-date" placeholder="yyyy-MM-dd"></input>
      </div>
    </div>
    <div class="form-group">
      <label class="control-label" for="summary">Summary<span class="text-danger">*</span></label>
      <div>
          <textarea class="input-sm form-control" ng-model="$ctrl.complaint.summary" name="summary" id="summary"></textarea>
      </div>
    </div>
    <div class="form-group">
      <label class="control-label" for="actions">Actions/Response<span class="text-danger">*</span></label>
      <div>
          <textarea class="input-sm form-control" ng-model="$ctrl.complaint.actions" name="actions" id="actions"></textarea>
      </div>
    </div>
    <div class="form-group">
      <label class="checkbox-inline" for="complainantContacted">
        <input type="checkbox" id="complainant-contacted" name="complainantContacted" ng-model="$ctrl.complaint.complainantContacted"> Complaintant Contacted?
      </label>
    </div>
    <div class="form-group">
      <label class="checkbox-inline" for="developerContacted">
        <input type="checkbox" id="developer-contacted" name="developerContacted" ng-model="$ctrl.complaint.developerContacted"> Developer Contacted?
      </label>
    </div>
    <div class="form-group">
      <label class="checkbox-inline" for="oncAtlContacted">
        <input type="checkbox" id="onc-atl-contacted" name="oncAtlContacted" ng-model="$ctrl.complaint.oncAtlContacted"> ONC-ATL Contacted?
      </label>
    </div>
    <div>
      <button class="btn btn-ai-success btn-small pull-right" ng-click="$ctrl.saveComplaint($ctrl.complaint)" ><i class="fa fa-save"></i><span class="sr-only"> Save</span></button>
      <button class="btn btn-warning btn-small" ng-click="$ctrl.cancelEdit()"><i class="fa fa-close"></i><span class="sr-only"> Cancel</span></button>
      <button class="btn btn-danger btn-small"
          ng-if="$ctrl.mode === $ctrl.modes.EDIT"
          ng-click="$ctrl.deleteComplaint($ctrl.complaint)"
          confirm="Are you sure you wish to delete this complaint?"
          confirm-ok="Yes"
          confirm-cancel="No"
          confirm-settings="{animation: false, keyboard: false, backdrop: 'static'}">
        <i class="fa fa-trash"></i><span class="sr-only"> Delete</span>
      </button>
    </div>
  </div>

</div>
