<header>
  <nav class="navbar navbar-default navbar-inverse navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <button type="button" class="navbar-toggle collapsed" ng-click="navCollapsed = !navCollapsed" ng-init="navCollapsed = true" aria-haspopup="true" aria-expanded="false" id="menu-toggle">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="#/search" ng-click="vm.clear()"><img src="assets/images/CHPL_Logo_03.png" alt="Certified Health IT Product List"></img></a>
      </div>

      <!-- Collect the nav links, forms, and other content for toggling -->
      <div class="collapse navbar-collapse" uib-collapse="navCollapsed" aria-labeledby="menu-toggle">
        <ul class="nav navbar-nav navbar-right">
          <li ng-class="{'active': vm.isActive('/search') }"><a href="#/search">CHPL<br />Search <i class="fa fa-search"></i></a></li>
          <li class="dropdown" uib-dropdown is-open="vm.widgetExpanded" auto-close="disabled">
            <a href class="dropdown-toggle" id="widget-toggle" uib-dropdown-toggle aria-haspopup="true" aria-expanded="vm.widgetExpanded">CMS ID<br />Creator <span class="fa fa-caret-down"></span></a>
            <div class="dropdown-menu" uib-dropdown-menu aria-labelledby="widget-toggle" id="widget-dropdown">
              <ai-cms-widget-display widget="vm.widget"></ai-cms-widget-display>
            </div>
          </li>
          <li class="dropdown" uib-dropdown is-open="vm.compareWidgetExpanded" auto-close="disabled">
            <a href class="dropdown-toggle" id="compare-widget-toggle" uib-dropdown-toggle aria-haspopup="true" aria-expanded="vm.compareWidgetExpanded">Compare<br />Products <span class="fa fa-caret-down"></span></a>
            <div class="dropdown-menu" uib-dropdown-menu aria-labelledby="compare-widget-toggle" id="compare-widget-dropdown">
              <ai-compare-widget-display widget="vm.compareWidget"></ai-compare-widget-display>
            </div>
          </li>
          <li ng-class="{'active': (vm.isActive('/resources') || vm.isActive('/overview')) }" class="dropdown" uib-dropdown>
            <a href class="dropdown-toggle" id="resource-toggle" uib-dropdown-toggle aria-haspopup="true" aria-expanded="false">CHPL<br />Resources <span class="fa fa-caret-down"></span></a>
            <ul class="dropdown-menu" uib-dropdown-menu aria-labelledby="resource-toggle">
              <li><a href="#/resources/overview">Overview</a></li>
              <li><a href="https://www.healthit.gov/sites/default/files/policy/chpl_public_user_guide.pdf" analytics-on="click" analytics-event="CHPL Public User Guide" analytics-properties="{ category: 'Resources', label: '' }">CHPL Public User Guide <i class="fa fa-download text-right"></i></li>
              <li><a href="#/resources/download">Download the CHPL</a></li>
              <li><a href="#/resources/chpl_api">CHPL API</a></li>
              <li><a href="#/resources/cms_lookup">CMS ID Reverse Lookup</a></li>
              <li><a href="mailto:ONC_CHPL@hhs.gov">Contact Us <i class="fa fa-envelope-o"></i></a></li>
            </ul>
          </li>
          <li ng-class="{'active': vm.isActive('/decertifications/products') }"><a href="#/decertifications/products">Decertified<br/>Products</a></li>
          <li ng-class="{'active': vm.isActive('/decertifications/inactive') }"><a href="#/decertifications/inactive">Inactive<br/>Certificates</a></li>
          <li ng-class="{'active': vm.isActive('/decertifications/developers') }"><a href="#/decertifications/developers">Banned<br/>Developers</a></li>
          <li ng-class="{'active': vm.isActive('/admin') }" class="dropdown" uib-dropdown auto-close="outsideClick">
            &nbsp;<br /><a href class="dropdown-toggle" id="login-toggle" uib-dropdown-toggle aria-haspopup="true" aria-expanded="false"><i class="fa fa-user"></i> <span ng-if="!vm.getUsername()" class="sr-only">Log in</span>{{ vm.getUsername() }} <span class="fa fa-caret-down"></span></a>
            <ul class="dropdown-menu" id="admin" uib-dropdown-menu aria-labelledby="login-toggle">
              <li ng-if="vm.isChplAdmin() || vm.isAcbAdmin() || vm.isAcbStaff()"><a href="#/admin/dpManagement">Developer &amp; Product Management</a></li>
              <li ng-if="vm.isChplAdmin()"><a href="#/admin/userManagement">User Management</a></li>
              <li ng-if="vm.isChplAdmin() || vm.isAcbAdmin()"><a href="#/admin/acbManagement">ONC-ACB Management</a></li>
              <li ng-if="vm.isChplAdmin() || vm.isAtlAdmin()"><a href="#/admin/atlManagement">ONC-ATL Management</a></li>
              <li ng-if="vm.isAuthed()"><a href="#/admin/reports">Reports</a></li>
              <li ng-if="vm.isChplAdmin()"><a href="#/admin/apiKeyManagement">API Key Management</a></li>
              <li ng-if="vm.isChplAdmin()"><a href="#/admin/announcementsManagement">Announcements Management</a></li>
              <li ng-if="vm.isChplAdmin() || vm.isCmsStaff() || vm.isOncStaff()"><a href="#/admin/cmsManagement">CMS Management</a></li>
              <li>
                <ai-login form-class="navbar-form"
                          p-class="navbar-text"
                          p-class-fail="navbar-text">
                </ai-login>
            </ul>
          </li>
        </ul>
      </div><!-- /.navbar-collapse -->
    </div><!-- /.container-fluid -->
  </nav>
</header>
