<div class="row">
  <div class="col-sm-12">
    <p class="text-right">
      <input type="checkbox" ng-model="vm.viewAllCerts" id="viewAllCerts" /><label for="viewAllCerts">See all Certifications</label>
    </p>
    <accordion close-others="true">
      <accordion-group heading="Certification Criteria ({{ vm.countCerts }} met)" aria-expanded="false">
        <div ng-if="vm.viewAllCerts || n.success" ng-class="vm.isEditing ? 'col-md-6' : 'col-md-4'" ng-repeat="n in vm.certs | orderBy:'number' track by $index">
          <p ng-if="!vm.isEditing">
            <i class="fa fa-lg" ng-class="{'fa-check-square-o': n.success && !n.hasVersion, 'fa-square-o': !n.success}"></i>
            <span class="sr-only">{{ n.success ? 'meets' : 'does not meet'}}</span>
            {{ n.number }}: {{ n.title }}
          </p>
          <p ng-if="vm.isEditing">
            <input type="checkbox" ng-model="n.success" id="data_{{n.number}}"></input>
            <label for="data_{{n.number}}">{{ n.number }}: {{ n.title }}</label>
          </p>
        </div>
      </accordion-group>
      <accordion-group heading="Clinical Quality Measures ({{ vm.countCqms }} met)" aria-expanded="false">
        <div ng-if="vm.viewAllCerts || n.success" ng-class="vm.isEditing ? 'col-md-6' : 'col-md-4'" ng-repeat="n in vm.builtCqms | orderBy:'id' track by $index">
          <p ng-if="!vm.isEditing">
            <i class="fa fa-lg" ng-class="{'fa-check-square-o': n.success && !n.hasVersion, 'fa-square-o': !n.success}"></i>
            <span class="sr-only">{{ n.success ? 'meets' : 'does not meet'}}</span>
            <b ng-if="n.hasVersion">{{ n.version.sort().join(', ') }}</b> {{ n.id }}: {{ n.title }}
          </p>
          <p ng-if="vm.isEditing">
            <input type="checkbox" ng-model="vm.editCqms[n.id]" ng-if="!n.hasVersion" id="data_{{n.id}}"></input>
            <span class="cert-bloc" ng-if="n.hasVersion">
              <select ng-model="vm.editCqms[n.id]" multiple data-ng-attr-size="{{ vm.allCqms[n.id].versions.length + 1 }}" id="data_{{n.id}}"
                      ng-options="version for version in vm.allCqms[n.id].versions">
                <option value=""></option>
              </select>
            </span>
            <label for="data_{{n.id}}">{{ n.id }}: {{ n.title }}</label>
          </p>
        </div>
      </accordion-group>
      <accordion-group heading="ATL Test Report" aria-expanded="false">
        <h3>ATL Test Report</h3>
        <p>The following link provides the detailed test results summary from the Accredited Testing Laboratory (ATL) responsible for testing the corresponding certified product.</p>
        <h4>Report File Location</h4>
        <a href="{{ vm.reportFileLocation }}">{{ vm.reportFileLocation }}</a>
      </accordion-group>
    </accordion>
  </div>
</div>
